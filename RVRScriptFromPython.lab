{"identifier":"3cbc8719-b072-4f4f-84c4-3b4aa38d4b9a","name":"AVR Python Test","summary":"","data":"14;const RED = {r:216.4,g:17.8,b:29.2};const GREEN = null;const BLUE = {r:0.0,g:184.3095238095238,b:251.5};const YELLOW = {r:255.0,g:236.6153846153846,b:66.23076923076923};const TOLERANCE = 30;\nconst SPEED = 63;\nconst NULLCOLOR = { r: 0, g: 0, b: 0 };\n\nasync function startProgram() {\n\t// Start of the program\n\t\n\tsetMainLed(NULLCOLOR);\n\n\tconst redAction = onRed;\n\tconst blueAction = onBlue;\n\tconst yellowAction = onYellow;\n\t\n\t// tooFar - Tells if the bot has overshot\n\t// startDistance - Distance travelled before last turn\n\tlet tooFar = true;\n\tlet startDistance = getDistance();\n\t\n\t// Red loop\n\twhile (getDistance() - startDistance < 46) {\n\t\tawait delay(0.0001);\n\n\t\tsetMainLed(RED);\n\t\tsetSpeed(SPEED);\n\n\t\tif (likeColor(RED)) {\n\t\t\t// If red is detected\n\t\t\tstopRoll();\n\t\t\tstartDistance = getDistance();\n\t\t\tawait redAction();\n\t\t\ttooFar = false;\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t// If bot has gone too far, try to recover\n\tif (tooFar) {\n\t\tstopRoll();\n\t\tstartDistance = getDistance();\n\t\tawait redAction();\n\t}\n\t\n\t\n\t// await rollToDistance(90, 255, getDistance() + 115);\n\t\n\ttooFar = true;\n\n\t\n\t// Blue loop\n\twhile (getDistance() - startDistance < 125) {\n\t\tawait delay(0.0001);\n\n\t\tsetMainLed(BLUE);\n\t\tsetSpeed(SPEED);\n\n\t\tif (likeColor(BLUE)) {\n\t\t\t// If blue is detected\n\t\t\tstopRoll();\n\t\t\tstartDistance = getDistance();\n\t\t\tawait blueAction();\n\t\t\ttooFar = false;\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t// If bot has gone too far, try to recover\n\tif (tooFar) {\n\t\tstopRoll();\n\t\tstartDistance = getDistance();\n\t\tawait blueAction();\n\t}\n\t\n\t// await rollToDistance(getHeading(), SPEED * 3, 600);\n\tawait rawMotor(SPEED * 3, SPEED * 3, 3.7); \n\t\n\ttooFar = true;\n\t\n\t// Yellow loop\n\twhile (getDistance() - startDistance < 613) {\n\t\tawait delay(0.0001);\n\n\t\tsetMainLed(YELLOW);\n\t\tsetSpeed(SPEED);\n\n\t\tif (likeColor(YELLOW)) {\n\t\t\t// If yellow is detected\n\t\t\tstopRoll();\n\t\t\tawait yellowAction();\n\t\t\ttooFar = false;\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t// If bot has gone too far, try to recover\n\tif (tooFar) {\n\t\tstopRoll();\n\t\tawait yellowAction();\n\t}\n\n\t// Drive into lot\n\tawait rawMotor(SPEED * 3, SPEED * 3, 3); \n\treturn;\n}\n\n\nfunction likeColor(compareColor) {\n\tconst seen = getColor();\n\treturn (alike(compareColor.r, seen.r) && alike(compareColor.g, seen.g) && alike(compareColor.b, seen.b));\n}\n\n\nfunction alike(compareTo, compareNum) {\n\treturn (compareTo - TOLERANCE <= compareNum) && (compareTo + TOLERANCE >= compareNum);\n}\n\n\nasync function onRed() {\n\tawait spin(90, 2);\n\t// await rawMotor(SPEED * 2, SPEED * 2, 0.7); \n\treturn;\n}\n\n\nasync function onBlue() {\n\tawait spin(-90, 2);\n\t// await rawMotor(SPEED * 2, SPEED * 2, 0.7); \n\treturn;\n}\n\n\nasync function onYellow() {\n\tawait spin(-90, 2);\n\t// await rawMotor(SPEED * 2, SPEED * 2, 0.7); \n\treturn;\n}\n","modified_on":"2024-09-21T12:36:10.4375000-05:00","program_type":"text","robots":[{"id":18}]}